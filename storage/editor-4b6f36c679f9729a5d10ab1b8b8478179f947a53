{"version":1,"windowDimensions":{"x":1366,"y":0,"width":1366,"height":768,"maximized":false},"grammars":{"grammarOverridesByPath":{}},"project":{"deserializer":"Project","paths":["C:\\Users\\dmolina\\Desktop\\test\\express\\testExpress"],"buffers":[{"id":"ec3fd066495a6a7b74aa4202a4440123","text":"var fs=require(\"fs\");\r\nvar namespace=require(\"express-namespace\");\r\nvar http=require(\"http\");\r\nvar path=require(\"path\");\r\nvar express=require(\"express\");\r\nvar resource = require('express-resource');\r\n\r\nvar app=express();\r\nvar config=require(\"./config.json\")[app.get(\"env\")];\r\nvar logger = require('morgan');\r\nvar favicon = require('serve-favicon');\r\nvar iniparser=require(\"iniparser\");\r\nvar rutaUsers=require(\"./routes/users.js\");\r\nvar msg=iniparser.parseSync(path.join(__dirname, \"msg.ini\"));\r\n\r\nvar rutas=require(\"./routes/rutas.js\");\r\nvar rutasApiRest=require(\"./routes/restApi.js\");\r\napp.use(express.bodyParser({keepExtensions: true,uploadDir: './uploads'}));\r\napp.use(express.methodOverride());\r\napp.use(express.cookieParser(\"S3CR3T\"));\r\napp.locals.pretty = config.pretty;\r\napp.use(app.router);\r\napp.use(require('stylus').middleware('./public'));\r\napp.set(\"view engine\", \"jade\");\r\napp.set(\"views\", \"./views\");\r\napp.use(express.static('./public'));\r\napp.use(express.static('./files'));\r\napp.use(express.logger({format:\"tiny\",stream:fs.createWriteStream(\"app.log\", {\"flags\":\"w\"})}));\r\napp.use(express.responseTime());\r\napp.use(logger(\"dev\"));\r\napp.use(favicon(path.join(__dirname, 'public', 'favicon.ico')));\r\napp.use(express.errorHandler());\r\napp.use(express.logger({ format:':remote-addr :method :url :status'}));\r\n\r\napp.use(function(req, res, next){\r\n    console.log(\"el metodo usado es : \"+req.method);\r\n    next();\r\n});\r\n\r\nrutas.fijarRutas(app);\r\nrutasApiRest.fijarRutas(app);\r\napp.use(\"/\", require(\"./routes/articulos-namespace-routes.js\"));\r\napp.resource(\"libros\", require(\"./routes/libros-resource-routes.js\"));\r\napp.get(\"/users\", rutaUsers.getAll);\r\n\r\n\r\napp.get('/file', function(req, res) {\r\n//    error();\r\n    console.log(\"file download\");\r\n    res.sendfile('./files/wolf.png', function(err) {\r\n        if (err) { console.log(err); }\r\n        else { console.log('file sent'); }\r\n    });\r\n});\r\n\r\napp.get(\"/errorServidor\", function(req, res){\r\n    error();\r\n});\r\n\r\napp.get('/download', function(req, res) {\r\n    res.download('./files/wolf.png', 'open-secret.png', function(err) {\r\n        if (err) { console.log(err); }\r\n        else { console.log('file downloaded'); }\r\n    });\r\n});\r\n\r\napp.use(function(req, res) {\r\n    res.status(400);\r\n    res.render('errors/404.jade',\r\n        {\r\n            title: '404',\r\n            message: 'File Not Found'\r\n        }\r\n    );\r\n});\r\n\r\napp.use(function(error, req, res, next) {\r\n    res.status(500);\r\n        res.render('errors/500.jade',\r\n        {\r\n            title: '500',\r\n            error: error\r\n        }\r\n    );\r\n});\r\n\r\napp.get(\"/multiples\", function(req, res){\r\n    res.format({\r\n        'text/plain': function() {\r\n            res.send('welcome');\r\n        },\r\n        'text/html': function() {\r\n            res.send('<b>welcome</b>');\r\n        },\r\n        'application/json': function() {\r\n            res.json({ message: 'welcome json' });\r\n        },\r\n        'default': function() {\r\n            res.send(406, 'Not Acceptable');\r\n        }\r\n    });\r\n});\r\n\r\napp.get(\"/redireccionar\", function(req, res){\r\n   res.redirect(\"http://www.google.com\");\r\n});\r\n\r\nhttp.createServer(app).listen(3333, function() {\r\n    console.log('App started : '+app.get(\"env\"));\r\n    console.log('App started : '+app.get(\"views\"));\r\n    console.log('App started : '+app.get(\"view engine\"));\r\n    console.log('App started : '+app.get(\"view cache\"));\r\n    console.log(config.db_host);\r\n    console.log(config.db_user);\r\n    console.log(config.db_pass);\r\n});\r\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":0,"column":21},"end":{"row":0,"column":21}},"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":5,"history":{"version":3,"nextCheckpointId":6,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"C:\\Users\\dmolina\\Desktop\\test\\express\\testExpress\\app.js","digestWhenLastPersisted":"e7b217705cd5704e488b8e4813f836c59aeddd28","preferredLineEnding":null,"nextMarkerId":10,"deserializer":"TextBuffer","version":5}]},"workspace":{"deserializer":"Workspace","paneContainer":{"deserializer":"PaneContainer","version":1,"root":{"deserializer":"Pane","id":8,"items":[{"deserializer":"TextEditor","id":17,"softTabs":true,"firstVisibleScreenRow":0,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":18,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"C:\\Users\\dmolina\\Desktop\\test\\express\\testExpress\\app.js","bufferId":"ec3fd066495a6a7b74aa4202a4440123","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"}],"activeItemURI":"C:\\Users\\dmolina\\Desktop\\test\\express\\testExpress\\app.js","focused":true,"flexScale":1},"activePaneId":8},"packagesWithActiveGrammars":["language-javascript","language-hyperlink","language-todo"],"destroyedItemURIs":["C:\\Users\\dmolina\\Desktop\\test\\express\\testExpress\\config.json","atom://config/install","C:%5CUsers%5Cdmolina%5CDesktop%5Ctest%5Cexpress%5CtestExpress%5Cpublic%5Cfavicon.ico","C:\\Users\\dmolina\\Desktop\\test\\express\\testExpress\\app.log"]},"packageStates":{"fuzzy-finder":{"C:\\Users\\dmolina\\Desktop\\test\\express\\testExpress\\app.js":1458873743014},"keybinding-resolver":{},"metrics":{"sessionLength":357771},"tree-view":{"directoryExpansionStates":{"C:\\Users\\dmolina\\Desktop\\test\\express\\testExpress":{"isExpanded":true,"entries":{"files":{"isExpanded":false,"entries":{}},"modules":{"isExpanded":false,"entries":{}},"node_modules":{"isExpanded":false,"entries":{}},"public":{"isExpanded":false,"entries":{}},"routes":{"isExpanded":false,"entries":{}},"test":{"isExpanded":false,"entries":{}},"uploads":{"isExpanded":false,"entries":{}},"views":{"isExpanded":false,"entries":{}}}}},"selectedPath":"C:\\Users\\dmolina\\Desktop\\test\\express\\testExpress","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200},"my-package":{}},"fullScreen":true}